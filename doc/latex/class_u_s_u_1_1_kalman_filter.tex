\hypertarget{class_u_s_u_1_1_kalman_filter}{\section{\-U\-S\-U\-:\-:\-Kalman\-Filter \-Class \-Reference}
\label{class_u_s_u_1_1_kalman_filter}\index{\-U\-S\-U\-::\-Kalman\-Filter@{\-U\-S\-U\-::\-Kalman\-Filter}}
}


\-Represents the \-Periodic \-Thread class for state estimation.  




{\ttfamily \#include $<$kalmanfilter.\-h$>$}



\-Inheritance diagram for \-U\-S\-U\-:\-:\-Kalman\-Filter\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=200pt]{class_u_s_u_1_1_kalman_filter__inherit__graph}
\end{center}
\end{figure}


\-Collaboration diagram for \-U\-S\-U\-:\-:\-Kalman\-Filter\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=200pt]{class_u_s_u_1_1_kalman_filter__coll__graph}
\end{center}
\end{figure}
\subsection*{\-Public \-Member \-Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_u_s_u_1_1_kalman_filter_a65e87c695dac9877015a2ace1471fdc2}{\-Kalman\-Filter} (int priority, unsigned int period\-\_\-us, const char $\ast$i2c\-Imu, const char $\ast$i2c\-Motor)
\begin{DoxyCompactList}\small\item\em \-Constructor of the class. \end{DoxyCompactList}\item 
virtual void \hyperlink{class_u_s_u_1_1_kalman_filter_a47cc7f620b57b25133289e61dbf2a7be}{run} ()
\begin{DoxyCompactList}\small\item\em \-Thread routine. \end{DoxyCompactList}\item 
void \hyperlink{class_u_s_u_1_1_kalman_filter_a3f8b3ce719dcb24745150f8c4ef361b8}{stop} ()
\begin{DoxyCompactList}\small\item\em \-Signals the thread to stop. \end{DoxyCompactList}\item 
bool \hyperlink{class_u_s_u_1_1_kalman_filter_a3ed1c15b5301f0840f6a7a3d7696fb0a}{get\-State} ()
\begin{DoxyCompactList}\small\item\em \-Returns the current system state estimate. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{\-Detailed \-Description}
\-Represents the \-Periodic \-Thread class for state estimation. 

\-This class is derived from \hyperlink{class_u_s_u_1_1_periodic_rt_thread}{\-Periodic\-Rt\-Thread}. \-It initializes the interface to the \-Min\-I\-M\-U9v2 and estimates the system state using \-Kalman filtering techniques. \-The state estimate can be accessed from other threads (protected by mutex).

\-T\-O\-D\-O\-:
\begin{DoxyItemize}
\item \-Implement kalman filter for state estimate
\item change name to something more meaningful? 
\end{DoxyItemize}

\-Definition at line 38 of file kalmanfilter.\-h.



\subsection{\-Constructor \& \-Destructor \-Documentation}
\hypertarget{class_u_s_u_1_1_kalman_filter_a65e87c695dac9877015a2ace1471fdc2}{\index{\-U\-S\-U\-::\-Kalman\-Filter@{\-U\-S\-U\-::\-Kalman\-Filter}!\-Kalman\-Filter@{\-Kalman\-Filter}}
\index{\-Kalman\-Filter@{\-Kalman\-Filter}!USU::KalmanFilter@{\-U\-S\-U\-::\-Kalman\-Filter}}
\subsubsection[{\-Kalman\-Filter}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Kalman\-Filter\-::\-Kalman\-Filter} (
\begin{DoxyParamCaption}
\item[{int}]{priority, }
\item[{unsigned int}]{period\-\_\-us, }
\item[{const char $\ast$}]{i2c\-Imu, }
\item[{const char $\ast$}]{i2c\-Motor}
\end{DoxyParamCaption}
)}}\label{class_u_s_u_1_1_kalman_filter_a65e87c695dac9877015a2ace1471fdc2}


\-Constructor of the class. 

\-Initializes the interface to the \-Min\-I\-M\-U9 sensors and to the 3\-D\-M-\/\-G\-X3. \-Sets up the motor controller.


\begin{DoxyParams}{\-Parameters}
{\em priority} & priority of the underlying periodic thread \\
\hline
{\em period\-\_\-us} & period (in us) of the underlying periodic thread \\
\hline
{\em i2c\-Imu} & name of the \-I2\-C-\/device for the \hyperlink{class_i_m_u}{\-I\-M\-U} (e.\-g. /dev/i2c-\/1) \\
\hline
{\em i2c\-Motor} & name of the \-I2\-C-\/device for the \-Motors (e.\-g. /dev/i2c-\/2) \\
\hline
\end{DoxyParams}


\-Definition at line 48 of file kalmanfilter.\-cpp.



\subsection{\-Member \-Function \-Documentation}
\hypertarget{class_u_s_u_1_1_kalman_filter_a3ed1c15b5301f0840f6a7a3d7696fb0a}{\index{\-U\-S\-U\-::\-Kalman\-Filter@{\-U\-S\-U\-::\-Kalman\-Filter}!get\-State@{get\-State}}
\index{get\-State@{get\-State}!USU::KalmanFilter@{\-U\-S\-U\-::\-Kalman\-Filter}}
\subsubsection[{get\-State}]{\setlength{\rightskip}{0pt plus 5cm}bool {\bf \-Kalman\-Filter\-::get\-State} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_u_s_u_1_1_kalman_filter_a3ed1c15b5301f0840f6a7a3d7696fb0a}


\-Returns the current system state estimate. 

\-Copies the current system state estimate. \-Acquires mutex before acessing the internal variable to avoid read/write-\/conflicts.

\begin{DoxyReturn}{\-Returns}
bool \-Current system state \-T\-O\-D\-O\-: \-Currently only dummy variable. \-Replace with actual state representation (quaternion?) \-Probably not necessary anymore 
\end{DoxyReturn}


\-Definition at line 141 of file kalmanfilter.\-cpp.

\hypertarget{class_u_s_u_1_1_kalman_filter_a47cc7f620b57b25133289e61dbf2a7be}{\index{\-U\-S\-U\-::\-Kalman\-Filter@{\-U\-S\-U\-::\-Kalman\-Filter}!run@{run}}
\index{run@{run}!USU::KalmanFilter@{\-U\-S\-U\-::\-Kalman\-Filter}}
\subsubsection[{run}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf \-Kalman\-Filter\-::run} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}\label{class_u_s_u_1_1_kalman_filter_a47cc7f620b57b25133289e61dbf2a7be}


\-Thread routine. 

\-Current scenario is\-:
\begin{DoxyItemize}
\item \-Get quaternion data from \-Micro\-Strain at constant rate
\item \-Hand this state estimate to the motor controller.
\end{DoxyItemize}

\-T\-O\-D\-O\-: \-Develop scenario using \-Kalman-\/\-Filter \-T\-O\-D\-O\-: \-Do some \-Kalman-\/\-Filtering magic here

\-T\-O\-D\-O\-: some more magic 

\-Implements \hyperlink{class_u_s_u_1_1_periodic_rt_thread_ac9146b3088a9b268594ce41d002d020a}{\-U\-S\-U\-::\-Periodic\-Rt\-Thread}.



\-Definition at line 54 of file kalmanfilter.\-cpp.

\hypertarget{class_u_s_u_1_1_kalman_filter_a3f8b3ce719dcb24745150f8c4ef361b8}{\index{\-U\-S\-U\-::\-Kalman\-Filter@{\-U\-S\-U\-::\-Kalman\-Filter}!stop@{stop}}
\index{stop@{stop}!USU::KalmanFilter@{\-U\-S\-U\-::\-Kalman\-Filter}}
\subsubsection[{stop}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf \-U\-S\-U\-::\-Kalman\-Filter\-::stop} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{class_u_s_u_1_1_kalman_filter_a3f8b3ce719dcb24745150f8c4ef361b8}


\-Signals the thread to stop. 



\-Definition at line 70 of file kalmanfilter.\-h.



\-The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
include/\hyperlink{kalmanfilter_8h}{kalmanfilter.\-h}\item 
src/\hyperlink{kalmanfilter_8cpp}{kalmanfilter.\-cpp}\end{DoxyCompactItemize}
